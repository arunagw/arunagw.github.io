
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Arun Agrawal&#8217;s Blog</title>
  <meta name="author" content="Arun Agrawal">

  
  <meta name="description" content="ruby on rails contributor and developer">
  <meta name="keywords" content="arunagw, Arun Agrawal, ruby, rubyonrails, rails, design, developer, rails contributor">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://arun.im/4">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/ArunAgrawal" rel="alternate" title="Arun Agrawal's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8185166-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Arun Agrawal&#8217;s Blog</a></h1>
  
    <h2>Ruby on Rails Developer</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/ArunAgrawal" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:arun.im" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="/contact">Contact</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/gem-1-5-rails-2-3/">Gem 1.5 With Rails 2.3</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-19T00:00:00+01:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content">You may fall down into the situation where you don&#8217;t have RVM and your system gem is upgraded for using latest things.

And your old application is still running on older version of rails.

This is just a workaround of using <code>Gem > 1.3.7</code> in Rails 2.3 Applications.

I have tested this solution with Rails 2.3.5 and different version of gems.

After upgrading gems to 1.6.2 i have got an error 
<pre>
/activesupport-2.3.5/lib/active_support/dependencies.rb:55: 
uninitialized constant ActiveSupport::Dependencies::Mutex (NameError)
</pre>

To fix this error need to update </code>boot.rb</code> file. Place this at the top of <code>boot.rb</code>

<pre>require 'thread'</pre>

After adding this you should be getting this error 
<pre> 
/gem_dependency.rb:119:in
 `requirement': undefined local variable or method `version_requirements'
</pre>

To fix this error you need update your <code>environment.rb</code> file.
Add this code above your <code>Rails::Initializer.run</code> block.

<pre>
if Gem::Version.new(Gem::VERSION) >= Gem::Version.new('1.3.7')
 module Rails
   class GemDependency
     def requirement
       r = super
       (r == Gem::Requirement.default) ? nil : r
     end
   end
 end
end
</pre>

Now your application should start running properly. Have fun ;)

Now you can downgrade or upgrade your system gem version. Your application will still run. 

Above workaround works for me very well. Any other ideas? 
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/redis-key-value-store/">Redis Key-value Store</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-18T00:00:00+01:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><a href="http://redis.io/">Redis</a> is really cool and lightweight key-value store. If you are looking for something in which you can store some string, hashes, lists, sets. TheÂ <a href="http://redis.io/">Redis</a> is the best.

If you are a Ruby developer then you must try out this with a <a href="https://github.com/ezmobius/redis-rb">redis-rb</a> gem. Very easy to configure, very easy to store things.

Following is the way of using redis in Ruby way.

To install
<pre>gem install redis</pre>
To load
<pre>require 'redis'</pre>
Before performing any operation with redis server you need to install <a href="http://redis.io/download">Redis</a> and start the redis server.

After that you can do like
<pre>redis = Redis.new # Automatically connect with the default port.

# if you have changed the port then you can specify the port in initialize.

&gt;&gt; redis.set "foo", "bar"
=&gt; "OK"

&gt;&gt; redis.get "foo"
=&gt; "bar"</pre>
Storing objects
<pre>&gt;&gt; redis.set "foo", [1, 2, 3].to_json
=&gt; OK

&gt;&gt; JSON.parse(redis.get("foo"))
=&gt; [1, 2, 3]</pre>
There are lot&#8217;s more things you can do with the Redis.

Links help you in redis

<a href="http://redis.io">Redis official documentation</a> (<a href="http://redis.io">http://redis.io</a>)
<a href="https://github.com/antirez/redis">Github redis repository </a>(<a href="https://github.com/antirez/redis">https://github.com/antirez/redis</a>)
<a href="https://github.com/ezmobius/redis-rb">Github redis rubygem repository </a>(<a href="https://github.com/ezmobius/redis-rb">https://github.com/ezmobius/redis-rb</a>)
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/bundler-usage-installing-gems/">Bundler Usage &#8211; Installing Gems</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-18T00:00:00+01:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content">Every time you change your Gemfile then you might adding/removing any dependancies in your application.

Just <code> bundle install </code> will install gems for you. 

The output may look like 

<pre>
$ bundle install 
Fetching git://github.com/rails/rails.git
Fetching source index for http://rubygems.org/ 
Using rake (0.8.7) 
Installing abstract (1.0.0)
Your bundle is complete! Use `bundle show [gemname]` to see where a
bundled gem is installed.
</pre>

You can specify groups for special environments 

<pre> 
$ bundle install --without development test
</pre>
<pre>
$ bundle install --without test
</pre>

You can specify installation directory for your gems. 
This will install all the gems into tmp/bundle folder
<pre>
$ bundle install --path tmp/bundle
</pre>

You can check your applications bundler config. 

<pre> 
$ bundle config 

Settings are listed in order of priority. The top value will be used.

disable_shared_gems
  Set for your local app (/Users/arunagw/foobar/.bundle/config): "1"

path
  Set for your local app (/Users/arunagw/foobar/.bundle/config): "tmp/bundle"
</pre>

For more details about bundler you can checkout <a href="http://gembundler.com/">http://gembundler.com/</a>
And also <a href="http://railscasts.com/episodes/201-bundler"> http://railscasts.com/episodes/201-bundler</a>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/bundler-usage-manage-gemfile/">Bundler Usage &#8211; Manage Gemfile</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-17T00:00:00+01:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content">In the previous post we posted about basic <a href="http://gembundler.com/">Bundler</a> usage. Here i am posting about some advance way of managing Gemfile.

<a href="http://gembundler.com/">Bundler</a> requires a Gemfile. If you are creating a Rails application which is above to version 3, the Gemfile automatic gets created.

Gemfile contains all your dependent gems.
<pre>gem "rails", "~&gt; 3.0.5"

gem "mysql2"</pre>
The above Gemfile explains that we need Rails 3.0.5 and Mysql2 gems for our application.

Gemfile can be manage in different ways.

We can group things together which is only used in specific environment.
<pre>group :test do 
  gem "faker
end
group :development, :test do
  gem 'ruby-debug'
end</pre>
We can specify the gem version as a second argument in gem. If there is no version then it will fetch the latest one.

Some time gem name is different and the library needs to be loaded may be different. Then we need to specify specifically the lib name.
<pre>gem 'sqlite3-ruby', :require =&gt; 'sqlite3'</pre>
Loading gem from a git repository directly

If our library or gem is hosted somewhere else then we can add more source at the top of Gemfile. But if we want to fetch Gem from a git repository then we need to something like below. But that library must contain a .gemspec file to consider as a Gem.
<pre>gem 'nokogiri', :git =&gt; 'git://github.com/tenderlove/nokogiri.git'</pre>
We can also specify a branch/tag/ref of git repository.
<pre>gem 'nokogiri', :git =&gt; 'git://github.com/tenderlove/nokogiri.git',
                                   :branch =&gt; 'stable-2'</pre>
<pre>gem 'nokogiri', :git =&gt; 'git://github.com/tenderlove/nokogiri.git', 
                                   :tag =&gt; 'tag-2'</pre>
<pre>gem 'nokogiri', :git =&gt; 'git://github.com/tenderlove/nokogiri.git', 
                                   :ref =&gt; '23456'</pre>
We can load gems from our local path also.
<pre>gem 'nokogiri', :path =&gt; '~/code/nokogiri'</pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/query-cache-rails/">Query Cache in Rails</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-27T00:00:00+01:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content">By default Rails do Query cache. Whenever it execute <code>find</code> it enables the query cache.
You can enable manually by wrapping up in <code>cache</code> block.
<pre>Post.cache do
  puts Post.first
  puts Post.first
  puts Post.first
end
</pre>

Your development.log looks like:
<pre>
Post Load (1.0ms) SELECT * FROM posts LIMIT 1
CACHE (0.0ms) SELECT * FROM posts LIMIT 1
CACHE (0.0ms) SELECT * FROM posts LIMIT 1
</pre>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="5">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="3">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
<section>
	<span>
		<img src="http://www.gravatar.com/avatar/ee85853909657f47c8a68e8a9bc7d992?s=150" alt="Gravatar of Arun Agrawal " title="Gravatar of Arun Agrawal" />
	</span>
</section>

<ol id="social-media-links">
  <li class="email"><a href="/contact">Email?</a></li>
  <li class="github"><a href="https://github.com/arunagw?rel=author">Github</a></li>
  <li class="twitter"><a href="https://twitter.com/arunagw?rel=author">Twitter</a></li>
  <li class="likes"><a href="http://likes.arun.im/">likes</a></li>
  <li class="google-plus"><a href="https://plus.google.com/103610296722452739457?rel=author">Google Plus</a></li>
  <li class="rss"><a href="http://feeds.feedburner.com/ArunAgrawal">RSS</a></li>
</ol>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2015/interview-on-rubyindia-podcast/">Interview on RubyIndia Podcast</a>
      </li>
    
      <li class="post">
        <a href="/2013/rails4-app-on-heroku/">Rails4 App on Heroku</a>
      </li>
    
      <li class="post">
        <a href="/2013/switched-to-heroku-and-octopress/">Switched to Heroku and Octopress</a>
      </li>
    
      <li class="post">
        <a href="/2012/slides-when-ruby-meets-java-the-power-of-torquebox/">Slides (When Ruby Meets Java - the Power of Torquebox)</a>
      </li>
    
      <li class="post">
        <a href="/2011/oauth-omniauth-twitter/">OAuth With OmniAuth and Twitter</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <p><a class="twitter-timeline" href="https://twitter.com/arunagw" data-widget-id="336944437999566849">Tweets by @arunagw</a></p>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</section>


<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/arunagw">@arunagw</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'arunagw',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/arunagw?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/arunagw">My Delicious Bookmarks &raquo;</a></p>
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/103610296722452739457?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Arun Agrawal -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
